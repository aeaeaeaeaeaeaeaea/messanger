<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>

<body>
	
	 
	<div th:if="${!chatList.isEmpty()}">
		<div th:each="chatRoom : ${chatRoom}">
			<a th:href="@{/chat/{chatId}(chatId = ${chatRoom.getId()} ) }" th:text="${chatRoom.getId()}">Text</a>
		</div>
	</div>
	

	<div th:if="${chatList.isEmpty()}">

		<div th:each="user : ${users}">
			<div th:if="${user.getId() != currentUser}">
				<a class="start-chat" id="chat" th:userId="${user.getId()}" th:currentUser="${currentUser}"
					th:text="${user.getUsername()}">text</a>
			</div>
		</div>

	</div>


	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<script>
		$(document).ready(function () {
			$(".start-chat").click(function (e) {
				e.preventDefault(); // Отменяем стандартное действие ссылки

				var mess = document.getElementById('chat');
				var userId = mess.getAttribute("userId");
				var currentUser = mess.getAttribute("currentUser");


				// Создаем объект данных для отправки
				var data = {
					userId: userId,
					currentUser: currentUser
				};

				// Отправляем POST-запрос на указанный URL
				$.ajax({
					type: "POST",
					url: "/chat?userId=" + userId + "&currentUser=" + currentUser, // Исправленная строка
					data: JSON.stringify(data),
					contentType: "application/json",
				});
			});
		});
	</script>



</body>

</html>